{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>QuizTaker - Home</title>
      <!-- Include Tailwind CSS CDN or link to your compiled CSS file -->
      <script src="https://cdn.tailwindcss.com"></script>
      <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.css" rel="stylesheet" />
   </head>
   <body class="bg-violet-600">

        <div class="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600">
            <div class="grid h-full max-w-lg grid-cols-4 mx-auto font-medium">
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                    </svg>
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Home</span>
                </button>
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M11.074 4 8.442.408A.95.95 0 0 0 7.014.254L2.926 4h8.148ZM9 13v-1a4 4 0 0 1 4-4h6V6a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1v-2h-6a4 4 0 0 1-4-4Z"/>
                        <path d="M19 10h-6a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1Zm-4.5 3.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM12.62 4h2.78L12.539.41a1.086 1.086 0 1 0-1.7 1.352L12.62 4Z"/>
                    </svg>
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Wallet</span>
                </button>
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12.25V1m0 11.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M4 19v-2.25m6-13.5V1m0 2.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M10 19V7.75m6 4.5V1m0 11.25a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM16 19v-2"/>
                    </svg>
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Settings</span>
                </button>
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
                    </svg>
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Profile</span>
                </button>
            </div>
        </div>

  
        <!-- Button to add a new question -->
        <button id="add_question" class="border-solid bg-white px-5 py-2.5 rounded-lg m-5">Add Question</button>
        <button id="delete_all" class="border-solid bg-white px-5 py-2.5 rounded-lg m-5">Delete All</button>

        <!-- Quiz Heading -->
                    
        <div class="m-2 p-2 border-2 border-green-400 bg-slate-50 rounded-bl-lg rounded-tr-lg p-2">
            <h6>This is quiz heading</h6>
        </div>

        <!--Quiz Question Section -->

        <div class="w-full sm:w-3/4 lg:w-3/5 mx-auto text-xl lg:text-2xl xl:text-3xl">
            
            <!-- Content container -->
            <div id="questions-container">

            <!-- questions go here -->
            
            </div>
        </div>

        <!-- Create Quiz-->
        <button id="create_quiz" class="border-solid bg-white px-5 py-2.5 rounded-lg m-5">Create Quiz</button>
    
        <script>

            //keep track of no of question added
            let questionCount = 0;

            document.addEventListener("DOMContentLoaded", function () {
                // Function to add a new question and options
                function addQuestion() {
                    
                    // Get all required input elements
                    const errorMessage = document.getElementById("question_" + questionCount.toString());
                    //console.log(errorMessage);
                    const requiredInputs = document.querySelectorAll('[required]');
                    let missingFields = [];

                    // Check each required input element for value
                    requiredInputs.forEach(function (input) {
                        if (!input.value) {
                            missingFields.push(input.name);
                        }
                    });

                    // Display error message if fields are missing
                        
                    if (missingFields.length > 0) {

                        const errorMessageText = `Please fill in the following required fields: ${missingFields.join(', ')} !`;
                        const errorMessageDiv = document.querySelector(".errorMessage"); // Check if error message element already exists
                            
                            if (errorMessageDiv) {
                                    // Update the existing error message element
                                    errorMessageDiv.textContent = errorMessageText;
                                    return
                                } 
                                
                            else {
                                    // Create a new error message element
                                    const newErrorMessageDiv = document.createElement("p");
                                    newErrorMessageDiv.classList.add("errorMessage");
                                    newErrorMessageDiv.classList.add("text-red-600", "w-full", "rounded-t-lg", "p-2", "text-sm", "font-semibold", "leading-none");
                                    newErrorMessageDiv.textContent = errorMessageText;
                                    errorMessage.appendChild(newErrorMessageDiv);
                                    return
                                }

                    }

                    // Increment the count
                    questionCount++;
                    
                    // Create a new question div
                    const newQuestionDiv = document.createElement("div");
                    const questionId = questionCount.toString();
                    //console.log(questionId);
                    qDivId = "question_" + questionId
                    newQuestionDiv.setAttribute("id", qDivId);
                    newQuestionDiv.classList.add("question", "bg-slate-50", "m-2", "p-4", "rounded-lg");
    
                    // Create a text input for the question
                    const newQuestionTitleDiv = document.createElement("div");
                    const questionInput = document.createElement("textarea");
                    questionInput.classList.add("bg-whie", "w-full", "rounded-t-lg","p-2","mb-2", "text-xl", "font-semibold", "leading-none", "text-black", "placeholder-green-500");
                    questionInput.type = "text";
                    questionInput.placeholder = "Enter your question";
                    questionInput.setAttribute("required", "true");
                    questionInput.setAttribute("name", "Question Title");
                    newQuestionTitleDiv.appendChild(questionInput);
                    newQuestionDiv.appendChild(newQuestionTitleDiv);
    
                    // Create text inputs for options (four options)
                    for (let i = 1; i <= 4; i++) {
                        const optionInput = document.createElement("textarea");
                        optionInput.type = "text";
                        const placeholder = 'Option ' + String.fromCharCode(64 + i); // Convert 0, 1, 2, 3 to 'a', 'b', 'c', 'd'
                        optionInput.placeholder = placeholder;
                        optionInput.classList.add("bg-white", "w-full", "rounded-t-lg","p-2", "text-sm", "font-semibold", "leading-none", "placeholder-indigo-500");
                        optionInput.setAttribute("required", "true");
                        optionInput.setAttribute("name", placeholder);
                        newQuestionDiv.appendChild(optionInput);
                    }

                    // remove error msgs
                    const errors = document.getElementsByClassName("errorMessage");

                    // Loop through error msgs
                    for (let i = errors.length - 1; i >= 0; i--) {
                        errors[i].remove();
                    }
    
                    // Create a deleteButton button element
                    const deleteButton = document.createElement("button");
                    deleteButton.classList.add("bg-red-500", "w-1/8", "h-full", "rounded","p-2", "text-xl", "leading-none", "m-2");
                    //deleteButton.textContent = "Delete";

                    // Create an SVG element
                    const svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    svgElement.setAttribute("class", "w-4 h-4");
                    svgElement.setAttribute("aria-hidden", "true");
                    svgElement.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                    svgElement.setAttribute("fill", "none");
                    svgElement.setAttribute("viewBox", "0 0 14 14");

                    // Create the path element within the SVG element
                    const pathElement = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathElement.setAttribute("stroke", "currentColor");
                    pathElement.setAttribute("stroke-linecap", "round");
                    pathElement.setAttribute("stroke-linejoin", "round");
                    pathElement.setAttribute("stroke-width", "2");
                    pathElement.setAttribute("d", "m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6");

                    // Append the path element to the SVG element
                    svgElement.appendChild(pathElement);

                    // Append the SVG element to the deleteButton
                    deleteButton.appendChild(svgElement);

                    deleteButton.addEventListener("click", function () {
                    // Remove the question when the delete button is clicked
                        newQuestionDiv.remove();
                    });
                    newQuestionDiv.appendChild(deleteButton);
    
                    // Append the new question div to the questions container
                    const questionsContainer = document.getElementById("questions-container");
                    questionsContainer.appendChild(newQuestionDiv);
                    
                }
    
                // Attach a click event listener to the "Add Question" button
                const addButton = document.getElementById("add_question");
                addButton.addEventListener("click", addQuestion);

                // Function to delete/clear all question and options
                function deleteAllQuestion() {

                    const questions = document.getElementsByClassName("question");

                    // Loop through and remove elements with the class name "question"
                    for (let i = questions.length - 1; i >= 0; i--) {
                        questions[i].remove();
                    }

                    // reset the count
                    questionCount = 0;

                }

                // Attach a click event listener to the "Add Question" button
                const deleteButton = document.getElementById("delete_all");
                deleteButton.addEventListener("click", deleteAllQuestion);

                // Function to createQuiz
                function createQuiz() {
                    console.log("sedning created quiz to server !")
                    return ''

                }

                // Attach a click event listener to the "Create Quiz" button
                const CreateQuizButton = document.getElementById("create_quiz");
                CreateQuizButton.addEventListener("click", createQuiz);
                
            });
        </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.js"></script>

    </body>
</html>